<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Plan Editor - Complete User Guide v2.0</title>
    <style>
        :root {
            --primary-color: #0176d3;
            --primary-dark: #014486;
            --primary-light: #1b96ff;
            --success-color: #2e844a;
            --success-light: #45c65a;
            --warning-color: #dd7a01;
            --warning-light: #fe9339;
            --error-color: #c23934;
            --error-light: #ea6076;
            --info-color: #0176d3;
            --purple-color: #9050e9;
            --gray-50: #fafafa;
            --gray-100: #f3f3f3;
            --gray-200: #e5e5e5;
            --gray-300: #c9c9c9;
            --gray-400: #9e9e9e;
            --gray-500: #706e6b;
            --gray-600: #514f4d;
            --gray-700: #3e3e3c;
            --gray-800: #2b2826;
            --gray-900: #181818;
            --cleared-bg: #c6f6d5;
            --cleared-border: #38a169;
            --nsf-bg: #fed7d7;
            --nsf-border: #e53e3e;
            --cancelled-bg: #fefcbf;
            --cancelled-border: #d69e2e;
            --scheduled-bg: #bee3f8;
            --scheduled-border: #3182ce;
            --header-gradient: linear-gradient(135deg, #1a365d 0%, #2c5282 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Salesforce Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            color: var(--gray-800);
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8ed 100%);
            min-height: 100vh;
        }

        /* Main Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Hero Header */
        .hero {
            background: var(--header-gradient);
            color: white;
            padding: 60px 40px;
            border-radius: 16px;
            margin-bottom: 40px;
            box-shadow: 0 20px 60px rgba(26, 54, 93, 0.3);
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 80%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 60%);
            pointer-events: none;
        }

        .hero h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 16px;
            position: relative;
        }

        .hero .subtitle {
            font-size: 1.25rem;
            opacity: 0.9;
            max-width: 700px;
            position: relative;
        }

        .hero .version-tag {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 8px 20px;
            border-radius: 30px;
            font-size: 0.9rem;
            margin-top: 20px;
            border: 1px solid rgba(255,255,255,0.3);
        }

        /* Table of Contents */
        .toc {
            background: white;
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .toc h2 {
            font-size: 1.5rem;
            color: var(--primary-dark);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--primary-light);
        }

        .toc-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 12px;
        }

        .toc-item {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            background: var(--gray-50);
            border-radius: 8px;
            text-decoration: none;
            color: var(--gray-700);
            transition: all 0.2s ease;
            border-left: 4px solid transparent;
        }

        .toc-item:hover {
            background: var(--primary-light);
            color: white;
            border-left-color: var(--primary-dark);
            transform: translateX(5px);
        }

        .toc-item .number {
            background: var(--primary-color);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 600;
            margin-right: 12px;
            flex-shrink: 0;
        }

        .toc-item:hover .number {
            background: white;
            color: var(--primary-dark);
        }

        /* Section Styling */
        .section {
            background: white;
            border-radius: 16px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .section h2 {
            font-size: 1.75rem;
            color: var(--primary-dark);
            margin-bottom: 24px;
            padding-bottom: 12px;
            border-bottom: 3px solid var(--primary-light);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .section h2 .section-number {
            background: var(--header-gradient);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            font-weight: 700;
        }

        .section h3 {
            font-size: 1.25rem;
            color: var(--gray-700);
            margin: 24px 0 16px;
            padding-left: 16px;
            border-left: 4px solid var(--primary-light);
        }

        .section p {
            margin-bottom: 16px;
            color: var(--gray-600);
        }

        /* Feature Boxes */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 24px 0;
        }

        .feature-box {
            background: linear-gradient(135deg, var(--gray-50) 0%, white 100%);
            border-radius: 12px;
            padding: 24px;
            border: 1px solid var(--gray-200);
            transition: all 0.3s ease;
        }

        .feature-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-color: var(--primary-light);
        }

        .feature-box h4 {
            font-size: 1.1rem;
            color: var(--primary-dark);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .feature-box p {
            font-size: 0.95rem;
            color: var(--gray-600);
            margin: 0;
        }

        .feature-icon {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .icon-blue { background: #dbeafe; }
        .icon-green { background: #dcfce7; }
        .icon-yellow { background: #fef3c7; }
        .icon-red { background: #fee2e2; }
        .icon-purple { background: #f3e8ff; }
        .icon-orange { background: #ffedd5; }

        /* UI Diagram */
        .ui-diagram {
            background: var(--gray-100);
            border-radius: 12px;
            padding: 20px;
            margin: 24px 0;
            border: 2px dashed var(--gray-300);
        }

        .diagram-component {
            background: white;
            border-radius: 8px;
            padding: 16px;
            margin: 12px 0;
            border: 1px solid var(--gray-300);
            position: relative;
        }

        .diagram-label {
            position: absolute;
            top: -10px;
            left: 16px;
            background: var(--primary-color);
            color: white;
            padding: 2px 12px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        /* Mock UI Components */
        .mock-header {
            background: var(--header-gradient);
            color: white;
            padding: 12px 20px;
            border-radius: 8px 8px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .mock-header .title {
            font-weight: 600;
        }

        .mock-header .actions {
            display: flex;
            gap: 8px;
        }

        .mock-header .btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.85rem;
            cursor: default;
        }

        .mock-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }

        .mock-table th {
            background: var(--header-gradient);
            color: white;
            padding: 10px 8px;
            text-align: center;
            font-size: 0.75rem;
            text-transform: uppercase;
        }

        .mock-table td {
            padding: 10px 8px;
            border-bottom: 1px solid var(--gray-200);
            text-align: center;
        }

        .mock-table tr:nth-child(even) {
            background: var(--gray-50);
        }

        .mock-table tr.scheduled {
            background: linear-gradient(180deg, #bee3f8 0%, #90cdf4 100%);
            border-left: 4px solid #3182ce;
        }

        .mock-table tr.cleared {
            background: linear-gradient(180deg, #c6f6d5 0%, #9ae6b4 100%);
            border-left: 4px solid #38a169;
        }

        .mock-table tr.nsf {
            background: linear-gradient(180deg, #fed7d7 0%, #feb2b2 100%);
            border-left: 4px solid #e53e3e;
        }

        .mock-table tr.cancelled {
            background: linear-gradient(180deg, #fefcbf 0%, #faf089 100%);
            border-left: 4px solid #d69e2e;
        }

        /* Status Badges */
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-scheduled { background: #bee3f8; color: #2b6cb0; }
        .status-cleared { background: #c6f6d5; color: #276749; }
        .status-nsf { background: #fed7d7; color: #c53030; }
        .status-cancelled { background: #fefcbf; color: #975a16; }

        /* Button Styles */
        .btn-demo {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: 500;
            border: none;
            cursor: default;
            margin: 4px;
        }

        .btn-blue { background: #3182ce; color: white; }
        .btn-green { background: #48bb78; color: white; }
        .btn-yellow { background: #ecc94b; color: #1a202c; }
        .btn-gray { background: #a0aec0; color: white; }
        .btn-red { background: #e53e3e; color: white; }

        /* Step-by-Step Instructions */
        .steps {
            counter-reset: step;
            margin: 24px 0;
        }

        .step {
            display: flex;
            gap: 16px;
            margin-bottom: 20px;
            padding: 20px;
            background: var(--gray-50);
            border-radius: 12px;
            border-left: 4px solid var(--primary-color);
        }

        .step::before {
            counter-increment: step;
            content: counter(step);
            background: var(--primary-color);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
        }

        .step-content h4 {
            font-size: 1rem;
            color: var(--gray-800);
            margin-bottom: 8px;
        }

        .step-content p {
            margin: 0;
            font-size: 0.95rem;
        }

        /* Info Boxes */
        .info-box {
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            display: flex;
            gap: 16px;
        }

        .info-box.tip {
            background: #e6fffa;
            border-left: 4px solid #38b2ac;
        }

        .info-box.warning {
            background: #fffbeb;
            border-left: 4px solid #f59e0b;
        }

        .info-box.note {
            background: #eff6ff;
            border-left: 4px solid #3b82f6;
        }

        .info-box.important {
            background: #fef2f2;
            border-left: 4px solid #ef4444;
        }

        .info-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .info-content {
            flex: 1;
        }

        .info-content strong {
            display: block;
            margin-bottom: 6px;
            color: var(--gray-800);
        }

        /* Keyboard Shortcut */
        .kbd {
            display: inline-block;
            background: var(--gray-100);
            border: 1px solid var(--gray-300);
            border-radius: 4px;
            padding: 2px 8px;
            font-family: 'SF Mono', Consolas, monospace;
            font-size: 0.85rem;
            box-shadow: 0 2px 0 var(--gray-300);
        }

        /* Code blocks */
        .code-block {
            background: var(--gray-800);
            color: #e2e8f0;
            padding: 16px;
            border-radius: 8px;
            font-family: 'SF Mono', Consolas, monospace;
            font-size: 0.85rem;
            overflow-x: auto;
            margin: 16px 0;
        }

        .code-block .comment { color: #68d391; }
        .code-block .keyword { color: #63b3ed; }
        .code-block .string { color: #f6ad55; }

        /* Fill Handle Demo */
        .fill-demo {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 4px;
            margin: 20px 0;
            max-width: 500px;
        }

        .fill-cell {
            background: white;
            border: 1px solid var(--gray-300);
            padding: 10px;
            text-align: center;
            font-size: 0.9rem;
            position: relative;
        }

        .fill-cell.selected {
            outline: 3px solid #3182ce;
            background: #ebf8ff;
        }

        .fill-cell.in-range {
            background: #bee3f8;
            border-style: dashed;
        }

        .fill-cell .handle {
            position: absolute;
            bottom: -4px;
            right: -4px;
            width: 10px;
            height: 10px;
            background: #1a365d;
            border: 2px solid white;
            cursor: crosshair;
        }

        .fill-cell.header {
            background: var(--gray-100);
            font-weight: 600;
            font-size: 0.75rem;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 40px;
            color: var(--gray-500);
            font-size: 0.9rem;
        }

        .footer a {
            color: var(--primary-color);
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero {
                padding: 40px 24px;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .section {
                padding: 24px;
            }

            .toc-grid {
                grid-template-columns: 1fr;
            }

            .feature-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section {
            animation: fadeIn 0.5s ease-out;
        }

        /* Confetti Animation Demo */
        .confetti-demo {
            position: relative;
            height: 150px;
            background: linear-gradient(135deg, #f0f4f8 0%, #d9e2ec 100%);
            border-radius: 12px;
            overflow: hidden;
            margin: 20px 0;
        }

        .confetti-piece {
            position: absolute;
            width: 10px;
            height: 10px;
            animation: confetti-fall 3s linear infinite;
        }

        .confetti-piece:nth-child(1) { left: 10%; background: #ff6b6b; animation-delay: 0s; }
        .confetti-piece:nth-child(2) { left: 25%; background: #4ecdc4; animation-delay: 0.5s; }
        .confetti-piece:nth-child(3) { left: 40%; background: #45b7d1; animation-delay: 1s; }
        .confetti-piece:nth-child(4) { left: 55%; background: #96ceb4; animation-delay: 0.3s; }
        .confetti-piece:nth-child(5) { left: 70%; background: #ffeaa7; animation-delay: 0.7s; }
        .confetti-piece:nth-child(6) { left: 85%; background: #fd79a8; animation-delay: 0.2s; }

        @keyframes confetti-fall {
            0% { top: -20px; transform: rotate(0deg); opacity: 1; }
            100% { top: 100%; transform: rotate(360deg); opacity: 0; }
        }

        /* Workflow Diagram */
        .workflow {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 12px;
            padding: 30px;
            background: var(--gray-50);
            border-radius: 12px;
            margin: 24px 0;
        }

        .workflow-step {
            background: white;
            padding: 16px 24px;
            border-radius: 8px;
            border: 2px solid var(--gray-200);
            text-align: center;
            min-width: 120px;
        }

        .workflow-step.active {
            border-color: var(--primary-color);
            background: #ebf8ff;
        }

        .workflow-arrow {
            font-size: 1.5rem;
            color: var(--gray-400);
        }

        /* Comparison Table */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .comparison-table th {
            background: var(--header-gradient);
            color: white;
            padding: 14px;
            text-align: left;
        }

        .comparison-table td {
            padding: 14px;
            border-bottom: 1px solid var(--gray-200);
        }

        .comparison-table tr:nth-child(even) {
            background: var(--gray-50);
        }

        .check { color: var(--success-color); font-weight: bold; }
        .cross { color: var(--error-color); font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <!-- Hero Section -->
        <header class="hero">
            <h1>Payment Plan Editor</h1>
            <p class="subtitle">Complete User Guide - Master every feature of the Payment Plan Editor to efficiently manage payment schedules, create versions, and activate plans.</p>
            <span class="version-tag">Version 2.0 | January 2026</span>
        </header>

        <!-- Table of Contents -->
        <nav class="toc" id="toc">
            <h2>Table of Contents</h2>
            <div class="toc-grid">
                <a href="#overview" class="toc-item"><span class="number">1</span> Overview & Key Concepts</a>
                <a href="#ui-layout" class="toc-item"><span class="number">2</span> User Interface Layout</a>
                <a href="#version-selector" class="toc-item"><span class="number">3</span> Version Selector</a>
                <a href="#tab-navigation" class="toc-item"><span class="number">4</span> Tab Navigation</a>
                <a href="#data-table" class="toc-item"><span class="number">5</span> Data Table Features</a>
                <a href="#status-colors" class="toc-item"><span class="number">6</span> Status Colors & Badges</a>
                <a href="#edit-mode" class="toc-item"><span class="number">7</span> Edit Mode (Manual)</a>
                <a href="#fill-handle" class="toc-item"><span class="number">8</span> Fill Handle Feature</a>
                <a href="#live-savings" class="toc-item"><span class="number">9</span> Live Savings Calculation</a>
                <a href="#recalculate" class="toc-item"><span class="number">10</span> Recalculate Button</a>
                <a href="#save-version" class="toc-item"><span class="number">11</span> Save as New Version</a>
                <a href="#activate" class="toc-item"><span class="number">12</span> Activate Plan</a>
                <a href="#suspend" class="toc-item"><span class="number">13</span> Suspend Payments</a>
                <a href="#wire-payments" class="toc-item"><span class="number">14</span> Wire Payments</a>
                <a href="#pagination" class="toc-item"><span class="number">15</span> Pagination</a>
                <a href="#modified-indicators" class="toc-item"><span class="number">16</span> Modified Indicators</a>
                <a href="#maximize" class="toc-item"><span class="number">17</span> Maximize/Minimize</a>
                <a href="#refresh" class="toc-item"><span class="number">18</span> Refresh Data</a>
                <a href="#keyboard-shortcuts" class="toc-item"><span class="number">19</span> Keyboard Shortcuts</a>
                <a href="#workflows" class="toc-item"><span class="number">20</span> Common Workflows</a>
            </div>
        </nav>

        <!-- Section 1: Overview -->
        <section class="section" id="overview">
            <h2><span class="section-number">1</span> Overview & Key Concepts</h2>

            <p>The Payment Plan Editor is a powerful Lightning Web Component (LWC) designed for managing payment schedules within Salesforce. It provides a rich, Excel-like editing experience with features like drag-to-fill and live calculations.</p>

            <div class="feature-grid">
                <div class="feature-box">
                    <h4><span class="feature-icon icon-blue">&#128196;</span> Version Control</h4>
                    <p>Every change creates a new version. Compare versions, track modifications, and maintain a complete audit trail.</p>
                </div>
                <div class="feature-box">
                    <h4><span class="feature-icon icon-green">&#9989;</span> Status Management</h4>
                    <p>Track payment statuses: Scheduled, Cleared, NSF, and Cancelled with color-coded visual indicators.</p>
                </div>
                <div class="feature-box">
                    <h4><span class="feature-icon icon-yellow">&#128221;</span> Inline Editing</h4>
                    <p>Edit cells directly in the table with instant validation and auto-calculation of savings.</p>
                </div>
                <div class="feature-box">
                    <h4><span class="feature-icon icon-purple">&#128257;</span> Fill Handle</h4>
                    <p>Excel-like drag-to-fill feature to quickly copy values across multiple cells.</p>
                </div>
                <div class="feature-box">
                    <h4><span class="feature-icon icon-orange">&#128181;</span> Wire Payments</h4>
                    <p>Add and track wired payments associated with schedule items via hover popover.</p>
                </div>
                <div class="feature-box">
                    <h4><span class="feature-icon icon-red">&#127881;</span> Celebrations</h4>
                    <p>Confetti animation celebrates successful plan activation for a delightful user experience.</p>
                </div>
            </div>

            <h3>Key Terminology</h3>
            <table class="comparison-table">
                <tr>
                    <th>Term</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td><strong>Payment Plan</strong></td>
                    <td>A versioned schedule of payment items for an Opportunity</td>
                </tr>
                <tr>
                    <td><strong>Schedule Item</strong></td>
                    <td>A single payment row with date, amounts, fees, and status</td>
                </tr>
                <tr>
                    <td><strong>Draft</strong></td>
                    <td>A saved but not yet active version of a payment plan</td>
                </tr>
                <tr>
                    <td><strong>Active Plan</strong></td>
                    <td>The currently effective payment plan (one per Opportunity)</td>
                </tr>
                <tr>
                    <td><strong>Savings</strong></td>
                    <td>Calculated as: Draft Amount - Banking Fee - Program Fee - Setup Fee</td>
                </tr>
                <tr>
                    <td><strong>Fill Handle</strong></td>
                    <td>Small square at cell corner used to drag values to other cells</td>
                </tr>
            </table>
        </section>

        <!-- Section 2: UI Layout -->
        <section class="section" id="ui-layout">
            <h2><span class="section-number">2</span> User Interface Layout</h2>

            <p>The Payment Plan Editor has a structured layout optimized for efficient data management:</p>

            <div class="ui-diagram">
                <div class="diagram-component">
                    <span class="diagram-label">Header Bar</span>
                    <div class="mock-header">
                        <span class="title">View Plan - PP-00052 <span style="background: rgba(255,255,255,0.2); padding: 2px 8px; border-radius: 4px; font-size: 0.8rem; margin-left: 8px;">v3 - Active</span></span>
                        <div class="actions">
                            <span class="btn">&#8635; Refresh</span>
                            <span class="btn">&#9634; Maximize</span>
                        </div>
                    </div>
                </div>

                <div class="diagram-component">
                    <span class="diagram-label">Version Selector</span>
                    <div style="padding: 10px; background: #f7fafc; display: flex; align-items: center; gap: 12px;">
                        <select style="padding: 8px 12px; border: 1px solid #cbd5e0; border-radius: 4px; min-width: 280px;">
                            <option>PP-00052 v3 (Active)</option>
                            <option>PP-00052 v2 (Draft)</option>
                            <option>PP-00052 v1</option>
                        </select>
                        <span style="background: #e2e8f0; padding: 4px 10px; border-radius: 12px; font-size: 0.85rem;">3 version(s)</span>
                    </div>
                </div>

                <div class="diagram-component">
                    <span class="diagram-label">Tab Navigation</span>
                    <div style="display: flex; background: #f7fafc; padding: 0 8px; border-bottom: 1px solid #e2e8f0;">
                        <span style="padding: 12px 20px; border-bottom: 3px solid #3182ce; color: #3182ce; font-weight: 500;">PP-00052 v3 (12)</span>
                        <span style="padding: 12px 20px; color: #718096;">Pending (0)</span>
                        <span style="margin-left: auto; padding: 8px; background: #e2e8f0; border-radius: 4px; font-size: 0.8rem;">EPPS &#9432;</span>
                    </div>
                </div>

                <div class="diagram-component">
                    <span class="diagram-label">Data Table</span>
                    <table class="mock-table">
                        <tr>
                            <!-- Checkbox column removed -->
                            <th>#</th>
                            <th>Draft #</th>
                            <th>Date</th>
                            <th>Draft</th>
                            <th>Setup</th>
                            <th>Program</th>
                            <th>Banking</th>
                            <th>Savings</th>
                            <th>Status</th>
                            <th>Wire</th>
                        </tr>
                        <tr class="cleared">
                            <td>1</td>
                            <td>1</td>
                            <td>01/07/2026</td>
                            <td>$500.00</td>
                            <td>$50.00</td>
                            <td>$25.00</td>
                            <td>$15.00</td>
                            <td style="color: #38a169;">$410.00</td>
                            <td><span class="status-badge status-cleared">Cleared</span></td>
                            <td>+</td>
                        </tr>
                        <tr class="scheduled">
                            <td>2*</td>
                            <td>2</td>
                            <td>01/14/2026</td>
                            <td>$500.00</td>
                            <td>$0.00</td>
                            <td>$25.00</td>
                            <td>$15.00</td>
                            <td style="color: #38a169;">$460.00</td>
                            <td><span class="status-badge status-scheduled">Scheduled</span></td>
                            <td>+</td>
                        </tr>
                    </table>
                </div>

                <div class="diagram-component">
                    <span class="diagram-label">Footer Actions</span>
                    <div style="display: flex; justify-content: space-between; padding: 12px 16px; background: #f7fafc;">
                        <div>
                            <span class="btn-demo btn-blue">Recalculate</span>
                        </div>
                        <div>
                            <span class="btn-demo btn-green">Activate</span>
                            <span class="btn-demo btn-blue">Manual</span>
                            <span class="btn-demo btn-yellow">Suspend</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="info-box note">
                <span class="info-icon">&#128161;</span>
                <div class="info-content">
                    <strong>Layout Responsiveness</strong>
                    The editor automatically adjusts to different screen sizes. On smaller screens, buttons stack vertically and columns may compress.
                </div>
            </div>
        </section>

        <!-- Section 3: Version Selector -->
        <section class="section" id="version-selector">
            <h2><span class="section-number">3</span> Version Selector</h2>

            <p>The version selector dropdown allows you to switch between different versions of the payment plan. Each version preserves a complete snapshot of the payment schedule at that point in time.</p>

            <h3>Understanding Version Labels</h3>
            <table class="comparison-table">
                <tr>
                    <th>Label Format</th>
                    <th>Meaning</th>
                </tr>
                <tr>
                    <td><code>PP-00052 v3 (Active)</code></td>
                    <td>This is the currently active plan - payments are being processed from this version</td>
                </tr>
                <tr>
                    <td><code>PP-00052 v2 (Draft)</code></td>
                    <td>A saved but not yet activated version - can be activated or modified</td>
                </tr>
                <tr>
                    <td><code>PP-00052 v1</code></td>
                    <td>A previous version (archived) - read-only for historical reference</td>
                </tr>
            </table>

            <h3>How to Switch Versions</h3>
            <div class="steps">
                <div class="step">
                    <div class="step-content">
                        <h4>Click the Dropdown</h4>
                        <p>Click on the version selector dropdown to see all available versions, sorted with newest first.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-content">
                        <h4>Select a Version</h4>
                        <p>Click on any version to load its data. The table will update to show that version's payment items.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-content">
                        <h4>Review the Data</h4>
                        <p>The header will update to show which version you're viewing, and modified items will show stars (*) next to their row numbers.</p>
                    </div>
                </div>
            </div>

            <div class="info-box tip">
                <span class="info-icon">&#128218;</span>
                <div class="info-content">
                    <strong>Version Count Badge</strong>
                    The badge next to the dropdown shows the total number of versions available (e.g., "3 version(s)"). This helps you understand the plan's history at a glance.
                </div>
            </div>
        </section>

        <!-- Section 4: Tab Navigation -->
        <section class="section" id="tab-navigation">
            <h2><span class="section-number">4</span> Tab Navigation</h2>

            <p>The tab bar allows you to switch between viewing the current plan data and any pending (unsaved) changes you're making in edit mode.</p>

            <div class="feature-grid">
                <div class="feature-box">
                    <h4><span class="feature-icon icon-blue">&#128203;</span> Active Tab</h4>
                    <p>Shows the saved data from the currently selected version. This is the default view. The tab label shows the plan name and version number.</p>
                </div>
                <div class="feature-box">
                    <h4><span class="feature-icon icon-yellow">&#128221;</span> Pending Tab</h4>
                    <p>Only appears when you're in edit mode. Shows your unsaved changes. The count in parentheses shows how many items you're editing.</p>
                </div>
            </div>

            <h3>Tab Workflow</h3>
            <div class="workflow">
                <div class="workflow-step active">
                    <strong>Active Tab</strong>
                    <small>View saved data</small>
                </div>
                <span class="workflow-arrow">&rarr;</span>
                <div class="workflow-step">
                    <strong>Click Manual</strong>
                    <small>Enter edit mode</small>
                </div>
                <span class="workflow-arrow">&rarr;</span>
                <div class="workflow-step">
                    <strong>Pending Tab</strong>
                    <small>Make changes</small>
                </div>
                <span class="workflow-arrow">&rarr;</span>
                <div class="workflow-step">
                    <strong>Save/Cancel</strong>
                    <small>Commit or discard</small>
                </div>
            </div>

            <div class="info-box note">
                <span class="info-icon">&#128276;</span>
                <div class="info-content">
                    <strong>EPPS Badge</strong>
                    The "EPPS" badge on the right side of the tab bar indicates that this plan uses the Electronic Payment Processing System. Hover over the info icon for more details.
                </div>
            </div>
        </section>

        <!-- Section 5: Data Table -->
        <section class="section" id="data-table">
            <h2><span class="section-number">5</span> Data Table Features</h2>

            <p>The data table is the heart of the Payment Plan Editor. It displays all payment schedule items with rich formatting and interactive features.</p>

            <h3>Column Descriptions</h3>
            <table class="comparison-table">
                <tr>
                    <th>Column</th>
                    <th>Description</th>
                    <th>Editable?</th>
                </tr>
                <!-- Checkbox column removed -->
                <tr>
                    <td><strong># (Row Number)</strong></td>
                    <td>Sequential row number. Shows asterisk (*) if modified from previous version</td>
                    <td>No</td>
                </tr>
                <tr>
                    <td><strong>Draft #</strong></td>
                    <td>Draft number that skips NSF and Cancelled items</td>
                    <td>No</td>
                </tr>
                <tr>
                    <td><strong>Date</strong></td>
                    <td>Payment date. Shows as date picker in edit mode</td>
                    <td>Scheduled only</td>
                </tr>
                <tr>
                    <td><strong>Draft</strong></td>
                    <td>Draft amount (the total payment amount)</td>
                    <td>Scheduled only</td>
                </tr>
                <tr>
                    <td><strong>Setup</strong></td>
                    <td>One-time setup fee (usually only on first payment)</td>
                    <td>Scheduled only</td>
                </tr>
                <tr>
                    <td><strong>Program</strong></td>
                    <td>Recurring program fee</td>
                    <td>Scheduled only</td>
                </tr>
                <tr>
                    <td><strong>Banking</strong></td>
                    <td>Banking/transaction fee per payment</td>
                    <td>Scheduled only</td>
                </tr>
                <tr>
                    <td><strong>Savings</strong></td>
                    <td>Auto-calculated: Draft - Setup - Program - Banking. Updates live!</td>
                    <td>No (auto)</td>
                </tr>
                <tr>
                    <td><strong>Status</strong></td>
                    <td>Payment status: Scheduled, Cleared, NSF, Cancelled</td>
                    <td>Scheduled only</td>
                </tr>
                <tr>
                    <td><strong>Wire</strong></td>
                    <td>Button to add wired payments (view mode only)</td>
                    <td>N/A</td>
                </tr>
                <tr>
                    <td><strong>Action</strong></td>
                    <td>Delete button (edit mode only, Scheduled rows only)</td>
                    <td>N/A</td>
                </tr>
            </table>

            <!-- Row Selection section removed - checkbox functionality was removed -->

            <h3>Footer Totals Row</h3>
            <p>The sticky footer row displays totals for all columns across ALL items (not just the current page):</p>
            <div style="background: var(--header-gradient); padding: 12px 16px; border-radius: 8px; display: flex; justify-content: space-around; color: white; font-size: 0.9rem; margin: 16px 0;">
                <span><strong>Total:</strong> $12,000.00</span>
                <span>$200.00</span>
                <span>$600.00</span>
                <span>$360.00</span>
                <span style="color: #90cdf4;">$10,840.00</span>
            </div>
        </section>

        <!-- Section 6: Status Colors -->
        <section class="section" id="status-colors">
            <h2><span class="section-number">6</span> Status Colors & Badges</h2>

            <p>Each payment status has a distinct color scheme for quick visual identification. The entire row is colored and includes a left border accent.</p>

            <div class="feature-grid">
                <div class="feature-box" style="background: linear-gradient(180deg, #bee3f8 0%, #90cdf4 100%); border-left: 4px solid #3182ce;">
                    <h4><span class="status-badge status-scheduled">Scheduled</span></h4>
                    <p style="color: #2b6cb0;"><strong>Blue</strong> - Payment is scheduled for future processing. This is the only editable status.</p>
                </div>
                <div class="feature-box" style="background: linear-gradient(180deg, #c6f6d5 0%, #9ae6b4 100%); border-left: 4px solid #38a169;">
                    <h4><span class="status-badge status-cleared">Cleared</span></h4>
                    <p style="color: #276749;"><strong>Green</strong> - Payment has been successfully processed and cleared.</p>
                </div>
                <div class="feature-box" style="background: linear-gradient(180deg, #fed7d7 0%, #feb2b2 100%); border-left: 4px solid #e53e3e;">
                    <h4><span class="status-badge status-nsf">NSF</span></h4>
                    <p style="color: #c53030;"><strong>Red</strong> - Non-Sufficient Funds. Payment failed due to insufficient balance.</p>
                </div>
                <div class="feature-box" style="background: linear-gradient(180deg, #fefcbf 0%, #faf089 100%); border-left: 4px solid #d69e2e;">
                    <h4><span class="status-badge status-cancelled">Cancelled</span></h4>
                    <p style="color: #975a16;"><strong>Yellow</strong> - Payment was cancelled and will not be processed.</p>
                </div>
            </div>

            <h3>Editing Rules by Status</h3>
            <table class="comparison-table">
                <tr>
                    <th>Status</th>
                    <th>Can Edit?</th>
                    <th>Can Delete?</th>
                    <th>Reason</th>
                </tr>
                <tr>
                    <td><span class="status-badge status-scheduled">Scheduled</span></td>
                    <td class="check">&#10004; Yes</td>
                    <td class="check">&#10004; Yes</td>
                    <td>Future payment, not yet processed</td>
                </tr>
                <tr>
                    <td><span class="status-badge status-cleared">Cleared</span></td>
                    <td class="cross">&#10008; No</td>
                    <td class="cross">&#10008; No</td>
                    <td>Already processed, immutable record</td>
                </tr>
                <tr>
                    <td><span class="status-badge status-nsf">NSF</span></td>
                    <td class="cross">&#10008; No</td>
                    <td class="cross">&#10008; No</td>
                    <td>Historical record, audit trail</td>
                </tr>
                <tr>
                    <td><span class="status-badge status-cancelled">Cancelled</span></td>
                    <td class="cross">&#10008; No</td>
                    <td class="cross">&#10008; No</td>
                    <td>Historical record, audit trail</td>
                </tr>
            </table>

            <div class="info-box important">
                <span class="info-icon">&#128274;</span>
                <div class="info-content">
                    <strong>Row Lock Indicator</strong>
                    In edit mode, non-editable rows (Cleared, NSF, Cancelled) display a lock icon in the action column instead of a delete button. The row is also slightly faded to indicate it cannot be modified.
                </div>
            </div>
        </section>

        <!-- Section 7: Edit Mode -->
        <section class="section" id="edit-mode">
            <h2><span class="section-number">7</span> Edit Mode (Manual Button)</h2>

            <p>Click the <span class="btn-demo btn-blue">Manual</span> button to enter edit mode. This creates a working copy of the current plan that you can modify without affecting the original.</p>

            <h3>Entering Edit Mode</h3>
            <div class="steps">
                <div class="step">
                    <div class="step-content">
                        <h4>Click "Manual" Button</h4>
                        <p>Located in the footer's right section. The system creates a copy of all schedule items for editing.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-content">
                        <h4>Switch to Pending Tab</h4>
                        <p>The view automatically switches to the "Pending" tab showing your working copy. The header changes to "Edit Plan -".</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-content">
                        <h4>Make Your Changes</h4>
                        <p>Edit cells directly, add new rows, or delete scheduled items. Only "Scheduled" rows can be modified.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-content">
                        <h4>Save or Cancel</h4>
                        <p>Click "Save as New Version" to create a new draft, or "Cancel" to discard all changes.</p>
                    </div>
                </div>
            </div>

            <h3>Edit Mode Features</h3>
            <div class="feature-grid">
                <div class="feature-box">
                    <h4><span class="feature-icon icon-blue">&#9998;</span> Inline Editing</h4>
                    <p>Click any editable cell to modify its value. Currency fields accept numbers and auto-format on blur.</p>
                </div>
                <div class="feature-box">
                    <h4><span class="feature-icon icon-green">&#10133;</span> Add Rows</h4>
                    <p>Click "+ Add Draft Payment" below the table to add new payment rows. Date auto-increments by 7 days.</p>
                </div>
                <div class="feature-box">
                    <h4><span class="feature-icon icon-red">&#128465;</span> Delete Rows</h4>
                    <p>Click the X button in the action column to mark a Scheduled row for deletion.</p>
                </div>
                <div class="feature-box">
                    <h4><span class="feature-icon icon-purple">&#128257;</span> Fill Handle</h4>
                    <p>Drag the small square at the corner of cells to copy or pattern-fill values to other cells.</p>
                </div>
            </div>

            <h3>Edit Mode Button Bar</h3>
            <div style="display: flex; justify-content: space-between; padding: 16px; background: #f7fafc; border-radius: 8px; margin: 16px 0;">
                <div>
                    <span class="btn-demo btn-blue">Recalculate</span>
                </div>
                <div>
                    <span class="btn-demo btn-gray">Cancel</span>
                    <span class="btn-demo btn-blue">Save as New Version</span>
                </div>
            </div>

            <div class="info-box warning">
                <span class="info-icon">&#9888;</span>
                <div class="info-content">
                    <strong>Unsaved Changes Warning</strong>
                    Changes in the Pending tab are NOT saved until you click "Save as New Version". If you click Cancel or switch versions, all pending changes will be lost!
                </div>
            </div>
        </section>

        <!-- Section 8: Fill Handle -->
        <section class="section" id="fill-handle">
            <h2><span class="section-number">8</span> Fill Handle Feature</h2>

            <p>The Fill Handle is an Excel-like feature that lets you quickly copy a value to multiple cells at once. This is one of the most powerful editing features in the Payment Plan Editor.</p>

            <h3>Fill Handle Visual</h3>
            <div class="fill-demo">
                <div class="fill-cell header">Draft</div>
                <div class="fill-cell header">Setup</div>
                <div class="fill-cell header">Program</div>
                <div class="fill-cell header">Banking</div>
                <div class="fill-cell header">Savings</div>

                <div class="fill-cell">$500.00</div>
                <div class="fill-cell">$50.00</div>
                <div class="fill-cell selected">$25.00<div class="handle"></div></div>
                <div class="fill-cell">$15.00</div>
                <div class="fill-cell">$410.00</div>

                <div class="fill-cell">$500.00</div>
                <div class="fill-cell">$0.00</div>
                <div class="fill-cell in-range">$25.00</div>
                <div class="fill-cell">$15.00</div>
                <div class="fill-cell">$460.00</div>

                <div class="fill-cell">$500.00</div>
                <div class="fill-cell">$0.00</div>
                <div class="fill-cell in-range">$25.00</div>
                <div class="fill-cell">$15.00</div>
                <div class="fill-cell">$460.00</div>
            </div>
            <p style="text-align: center; color: var(--gray-500); font-size: 0.9rem;">Drag the blue handle down to copy $25.00 to the highlighted cells</p>

            <h3>How to Use the Fill Handle</h3>
            <div class="steps">
                <div class="step">
                    <div class="step-content">
                        <h4>Click a Cell to Select It</h4>
                        <p>Click on any editable cell in a Scheduled row. The cell gets a blue outline and a small square handle appears at the bottom-right corner.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-content">
                        <h4>Drag the Handle</h4>
                        <p>Click and drag the small square handle up or down to extend to other cells in the same column. Target cells will highlight with a dashed border.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-content">
                        <h4>Release to Apply</h4>
                        <p>Release the mouse button to apply the fill. The source value will be copied to all target cells. A success toast will confirm how many cells were filled.</p>
                    </div>
                </div>
            </div>

            <h3>Fill Behavior</h3>
            <table class="comparison-table">
                <tr>
                    <th>Action</th>
                    <th>Fill Behavior</th>
                    <th>Example</th>
                </tr>
                <tr>
                    <td><strong>Select Cell &rarr; Drag Down</strong></td>
                    <td><strong>COPY</strong> - Same value to all target cells</td>
                    <td>Select $500 &rarr; drag down &rarr; all targets get $500</td>
                </tr>
                <tr>
                    <td><strong>Select Cell &rarr; Drag Up</strong></td>
                    <td><strong>COPY</strong> - Same value to all target cells</td>
                    <td>Select $25.00 &rarr; drag up &rarr; all targets get $25.00</td>
                </tr>
            </table>

            <h3>Fill Handle Examples</h3>
            <table class="comparison-table">
                <tr>
                    <th>Selected Value</th>
                    <th>Drag Direction</th>
                    <th>Result</th>
                </tr>
                <tr>
                    <td>$500.00</td>
                    <td>Down 3 rows</td>
                    <td>All 3 rows get $500.00</td>
                </tr>
                <tr>
                    <td>$15.00</td>
                    <td>Up 2 rows</td>
                    <td>Both rows get $15.00</td>
                </tr>
                <tr>
                    <td>01/15/2025</td>
                    <td>Down 5 rows</td>
                    <td>All 5 rows get 01/15/2025</td>
                </tr>
                <tr>
                    <td>Scheduled</td>
                    <td>Down 4 rows</td>
                    <td>All 4 rows get Scheduled status</td>
                </tr>
            </table>

            <div class="info-box tip">
                <span class="info-icon">&#128161;</span>
                <div class="info-content">
                    <strong>Pro Tip: Fill with Unsaved Values</strong>
                    The fill handle reads the CURRENT input value, even if you haven't saved! Type a new value in a cell, then immediately drag to fill - no need to save first.
                </div>
            </div>
        </section>

        <!-- Section 9: Live Savings -->
        <section class="section" id="live-savings">
            <h2><span class="section-number">9</span> Live Savings Calculation</h2>

            <p>The Savings column automatically recalculates in <strong>real-time</strong> as you type in any fee field. No need to wait or click a button - just type and watch the savings update instantly!</p>

            <h3>The Savings Formula</h3>
            <div class="code-block">
                <span class="comment">// Savings calculation</span><br>
                <span class="keyword">Savings</span> = <span class="string">Draft Amount</span> - <span class="string">Banking Fee</span> - <span class="string">Program Fee</span> - <span class="string">Setup Fee</span>
            </div>

            <h3>Live Update Example</h3>
            <div class="ui-diagram">
                <p style="margin-bottom: 16px; color: var(--gray-600);">Watch Savings update as you change the Draft Amount:</p>
                <table class="mock-table" style="max-width: 600px;">
                    <tr>
                        <th>Draft</th>
                        <th>Setup</th>
                        <th>Program</th>
                        <th>Banking</th>
                        <th>Savings</th>
                    </tr>
                    <tr class="scheduled">
                        <td><input type="text" value="500.00" style="width: 80px; text-align: right; border: 1px solid #3182ce; padding: 4px; border-radius: 4px;" disabled></td>
                        <td>$50.00</td>
                        <td>$25.00</td>
                        <td>$15.00</td>
                        <td style="color: #38a169; font-weight: 700;">$410.00</td>
                    </tr>
                </table>
                <p style="margin-top: 12px; color: var(--gray-500); font-size: 0.9rem;">Type "600" in Draft &rarr; Savings instantly updates to $510.00</p>
            </div>

            <h3>How It Works</h3>
            <ul style="margin: 16px 0 16px 24px; color: var(--gray-600);">
                <li><strong>On Input</strong> - As you type each character, the system parses the current value and recalculates savings</li>
                <li><strong>Partial Values Allowed</strong> - You can type "10." or "10.5" without issues - the system handles partial decimals</li>
                <li><strong>No Cursor Jump</strong> - The input field preserves your cursor position while calculating</li>
                <li><strong>On Blur</strong> - When you leave the field, the value is formatted to 2 decimal places</li>
            </ul>

            <div class="info-box note">
                <span class="info-icon">&#128200;</span>
                <div class="info-content">
                    <strong>Color Coding</strong>
                    Savings values are color-coded: <span style="color: #38a169; font-weight: 600;">green for positive</span> values and <span style="color: #e53e3e; font-weight: 600;">red for negative</span> values. Negative savings (fees exceed draft) are highlighted immediately so you can catch errors.
                </div>
            </div>
        </section>

        <!-- Section 10: Recalculate -->
        <section class="section" id="recalculate">
            <h2><span class="section-number">10</span> Recalculate Button</h2>

            <p>The <span class="btn-demo btn-blue">Recalculate</span> button creates a new payment plan version based on the current Opportunity data (Number of Weeks, Start Date, Draft Amount, etc.).</p>

            <h3>What Recalculate Does</h3>
            <div class="feature-grid">
                <div class="feature-box">
                    <h4><span class="feature-icon icon-blue">&#128194;</span> Reads Opportunity Data</h4>
                    <p>Pulls Number_of_Weeks__c, Start_Date__c, Draft_Amount__c, Banking_Fee__c, and other fields from the parent Opportunity.</p>
                </div>
                <div class="feature-box">
                    <h4><span class="feature-icon icon-green">&#128197;</span> Smart Date Continuation</h4>
                    <p>If there are existing non-Scheduled items (Cleared/NSF/Cancelled), new items start from the last item's date + 7 days.</p>
                </div>
                <div class="feature-box">
                    <h4><span class="feature-icon icon-yellow">&#128221;</span> Preserves Historical Items</h4>
                    <p>Cleared, NSF, and Cancelled items are kept as-is. Only Scheduled items are regenerated.</p>
                </div>
                <div class="feature-box">
                    <h4><span class="feature-icon icon-purple">&#128257;</span> Adjusts Item Count</h4>
                    <p>Calculates: needed items = Number_of_Weeks - existing non-Scheduled count. Creates exactly the right number of new Scheduled items.</p>
                </div>
            </div>

            <h3>Recalculate Workflow</h3>
            <div class="workflow">
                <div class="workflow-step">
                    <strong>Update Opp</strong>
                    <small>Change weeks/amount</small>
                </div>
                <span class="workflow-arrow">&rarr;</span>
                <div class="workflow-step active">
                    <strong>Recalculate</strong>
                    <small>Create new version</small>
                </div>
                <span class="workflow-arrow">&rarr;</span>
                <div class="workflow-step">
                    <strong>Review Draft</strong>
                    <small>Check new schedule</small>
                </div>
                <span class="workflow-arrow">&rarr;</span>
                <div class="workflow-step">
                    <strong>Activate</strong>
                    <small>Make it live</small>
                </div>
            </div>

            <h3>Example Scenario</h3>
            <div class="info-box note">
                <span class="info-icon">&#128221;</span>
                <div class="info-content">
                    <strong>Example:</strong> You have 24 weeks planned, 6 payments cleared. Client wants to extend to 30 weeks.
                    <ol style="margin-top: 8px; margin-left: 16px;">
                        <li>Update Opportunity: Number_of_Weeks__c = 30</li>
                        <li>Click Recalculate</li>
                        <li>System calculates: 30 - 6 (cleared) = 24 new Scheduled items needed</li>
                        <li>New schedule starts from last cleared date + 7 days</li>
                        <li>Review and Activate the new version</li>
                    </ol>
                </div>
            </div>
        </section>

        <!-- Section 11: Save Version -->
        <section class="section" id="save-version">
            <h2><span class="section-number">11</span> Save as New Version</h2>

            <p>When you're in edit mode and happy with your changes, click <span class="btn-demo btn-blue">Save as New Version</span> to create a new draft version.</p>

            <h3>What Gets Saved</h3>
            <ul style="margin: 16px 0 16px 24px; color: var(--gray-600);">
                <li>All non-deleted items from the Pending tab</li>
                <li>Modified values for dates, amounts, fees, and statuses</li>
                <li>Newly added rows</li>
                <li>Row numbers are renumbered sequentially</li>
            </ul>

            <h3>Save Behavior</h3>
            <table class="comparison-table">
                <tr>
                    <th>Aspect</th>
                    <th>Behavior</th>
                </tr>
                <tr>
                    <td><strong>Version Status</strong></td>
                    <td>New version is created as "Draft" (not Active)</td>
                </tr>
                <tr>
                    <td><strong>Version Number</strong></td>
                    <td>Incremented by 1 (e.g., v3 &rarr; v4)</td>
                </tr>
                <tr>
                    <td><strong>Auto-Switch</strong></td>
                    <td>View switches to the new draft version automatically</td>
                </tr>
                <tr>
                    <td><strong>Exit Edit Mode</strong></td>
                    <td>Returns to view mode after successful save</td>
                </tr>
                <tr>
                    <td><strong>Toast Message</strong></td>
                    <td>"New version saved as Draft. Click Activate to make it active."</td>
                </tr>
            </table>

            <div class="info-box important">
                <span class="info-icon">&#9888;</span>
                <div class="info-content">
                    <strong>Draft  Active</strong>
                    Saving creates a Draft version. Payments will NOT be processed from a Draft. You must click "Activate" to make the draft the active plan.
                </div>
            </div>
        </section>

        <!-- Section 12: Activate -->
        <section class="section" id="activate">
            <h2><span class="section-number">12</span> Activate Plan</h2>

            <p>The <span class="btn-demo btn-green">Activate</span> button makes a Draft version the active payment plan. This is the plan that will be used for payment processing.</p>

            <h3>Activation Rules</h3>
            <ul style="margin: 16px 0 16px 24px; color: var(--gray-600);">
                <li><strong>Only Drafts</strong> - The Activate button only appears for versions with status = "Draft"</li>
                <li><strong>One Active Plan</strong> - Only one version can be Active at a time per Opportunity</li>
                <li><strong>Previous Active</strong> - The previously active plan's status changes to indicate it's no longer active</li>
            </ul>

            <h3>Confetti Celebration!</h3>
            <p>When you successfully activate a plan, a colorful confetti animation celebrates your success!</p>
            <div class="confetti-demo">
                <div class="confetti-piece" style="border-radius: 50%;"></div>
                <div class="confetti-piece"></div>
                <div class="confetti-piece" style="border-radius: 50%;"></div>
                <div class="confetti-piece"></div>
                <div class="confetti-piece" style="border-radius: 50%;"></div>
                <div class="confetti-piece"></div>
                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 1.5rem; color: var(--primary-dark); font-weight: 600;">
                    &#127881; Plan Activated!
                </div>
            </div>

            <div class="info-box tip">
                <span class="info-icon">&#127881;</span>
                <div class="info-content">
                    <strong>Celebrate Success!</strong>
                    The confetti animation lasts about 5 seconds and then fades away. It's a small touch to make the activation moment feel special!
                </div>
            </div>
        </section>

        <!-- Section 13: Suspend -->
        <section class="section" id="suspend">
            <h2><span class="section-number">13</span> Suspend Payments</h2>

            <p>The <span class="btn-demo btn-yellow">Suspend</span> button creates a new version where all Scheduled items are changed to Cancelled. Use this when a client needs to pause their payment plan.</p>

            <h3>When to Use Suspend</h3>
            <ul style="margin: 16px 0 16px 24px; color: var(--gray-600);">
                <li>Client requests to pause payments temporarily</li>
                <li>Account issue requires payment hold</li>
                <li>Need to stop future payments while preserving history</li>
            </ul>

            <h3>What Suspend Does</h3>
            <table class="comparison-table">
                <tr>
                    <th>Item Status</th>
                    <th>After Suspend</th>
                </tr>
                <tr>
                    <td><span class="status-badge status-scheduled">Scheduled</span></td>
                    <td><span class="status-badge status-cancelled">Cancelled</span></td>
                </tr>
                <tr>
                    <td><span class="status-badge status-cleared">Cleared</span></td>
                    <td><span class="status-badge status-cleared">Cleared</span> (unchanged)</td>
                </tr>
                <tr>
                    <td><span class="status-badge status-nsf">NSF</span></td>
                    <td><span class="status-badge status-nsf">NSF</span> (unchanged)</td>
                </tr>
                <tr>
                    <td><span class="status-badge status-cancelled">Cancelled</span></td>
                    <td><span class="status-badge status-cancelled">Cancelled</span> (unchanged)</td>
                </tr>
            </table>

            <div class="info-box warning">
                <span class="info-icon">&#9888;</span>
                <div class="info-content">
                    <strong>Suspend Creates a New Version</strong>
                    Suspend doesn't modify the current version - it creates a new Draft version with suspended items. You'll need to Activate this new version to actually stop the payments.
                </div>
            </div>
        </section>

        <!-- Section 14: Wire Payments -->
        <section class="section" id="wire-payments">
            <h2><span class="section-number">14</span> Wire Payments</h2>

            <p>Wire Payments allow you to record external wire transfers associated with specific payment schedule items. These are tracked separately from the regular draft payments.</p>

            <h3>Adding Wire Payments</h3>
            <div class="steps">
                <div class="step">
                    <div class="step-content">
                        <h4>Click the + Button</h4>
                        <p>In the "Wire" column of any row, click the green + button to open the Wire Payment modal.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-content">
                        <h4>Fill in the Details</h4>
                        <p>Enter the Payment Date, Payment Amount, and optional Description for the wire transfer.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-content">
                        <h4>Save</h4>
                        <p>Click Save to create the Wired Payment record. It will be linked to the selected Schedule Item.</p>
                    </div>
                </div>
            </div>

            <h3>Viewing Wire Payments</h3>
            <p>Hover over any row that has wire payments to see a popover with details:</p>

            <div class="ui-diagram">
                <div style="background: white; border: 2px solid #ed8936; border-radius: 8px; max-width: 500px; overflow: hidden;">
                    <div style="background: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%); color: white; padding: 12px 16px; display: flex; align-items: center; gap: 8px;">
                        <span>&#128176;</span>
                        <strong>Wired Payments</strong>
                        <span style="opacity: 0.9;">(2)</span>
                    </div>
                    <div style="padding: 12px;">
                        <div style="display: grid; grid-template-columns: 100px 90px 90px 1fr; gap: 8px; background: #fed7aa; padding: 10px; border-radius: 4px; margin-bottom: 8px; font-size: 0.85rem; color: #744210;">
                            <span style="font-weight: 600; color: #7b341e;">WP-00001</span>
                            <span>01/10/2026</span>
                            <span style="font-weight: 700; color: #7b341e;">$1,500.00</span>
                            <span style="font-size: 0.8rem;">Initial wire deposit</span>
                        </div>
                        <div style="display: grid; grid-template-columns: 100px 90px 90px 1fr; gap: 8px; background: #fed7aa; padding: 10px; border-radius: 4px; font-size: 0.85rem; color: #744210;">
                            <span style="font-weight: 600; color: #7b341e;">WP-00002</span>
                            <span>01/15/2026</span>
                            <span style="font-weight: 700; color: #7b341e;">$500.00</span>
                            <span style="font-size: 0.8rem;">Additional payment</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="info-box note">
                <span class="info-icon">&#128065;</span>
                <div class="info-content">
                    <strong>Popover Behavior</strong>
                    The popover follows your cursor as you move across the row. It automatically repositions to stay within the viewport. Wire payments are NOT shown in edit mode to reduce distraction.
                </div>
            </div>
        </section>

        <!-- Section 15: Pagination -->
        <section class="section" id="pagination">
            <h2><span class="section-number">15</span> Pagination</h2>

            <p>For payment plans with more than 50 items, pagination controls appear at the bottom of the table to navigate through pages.</p>

            <h3>Pagination Controls</h3>
            <div style="display: flex; justify-content: center; align-items: center; gap: 12px; padding: 20px; background: var(--gray-100); border-radius: 8px; margin: 16px 0;">
                <button style="padding: 8px 14px; border: 1px solid var(--gray-300); background: white; border-radius: 4px; cursor: pointer;">&#171;</button>
                <button style="padding: 8px 14px; border: 1px solid var(--gray-300); background: white; border-radius: 4px; cursor: pointer;">&#8249;</button>
                <span style="padding: 0 16px; font-weight: 500;">51-100 of 150</span>
                <button style="padding: 8px 14px; border: 1px solid var(--gray-300); background: white; border-radius: 4px; cursor: pointer;">&#8250;</button>
                <button style="padding: 8px 14px; border: 1px solid var(--gray-300); background: white; border-radius: 4px; cursor: pointer;">&#187;</button>
            </div>

            <table class="comparison-table">
                <tr>
                    <th>Button</th>
                    <th>Action</th>
                </tr>
                <tr>
                    <td>&#171; (Double Left)</td>
                    <td>Jump to First Page</td>
                </tr>
                <tr>
                    <td>&#8249; (Left)</td>
                    <td>Previous Page</td>
                </tr>
                <tr>
                    <td>&#8250; (Right)</td>
                    <td>Next Page</td>
                </tr>
                <tr>
                    <td>&#187; (Double Right)</td>
                    <td>Jump to Last Page</td>
                </tr>
            </table>

            <div class="info-box note">
                <span class="info-icon">&#128202;</span>
                <div class="info-content">
                    <strong>Totals Include All Pages</strong>
                    The footer totals row shows sums for ALL items across all pages, not just the current page. This gives you an accurate picture of the complete payment plan.
                </div>
            </div>
        </section>

        <!-- Section 16: Modified Indicators -->
        <section class="section" id="modified-indicators">
            <h2><span class="section-number">16</span> Modified Indicators</h2>

            <p>The Payment Plan Editor shows visual indicators to help you understand what changed between versions.</p>

            <h3>Row Number Asterisk (*)</h3>
            <p>When comparing to the previous version, rows that have been modified show an asterisk (*) next to their row number:</p>

            <div class="ui-diagram">
                <table class="mock-table" style="max-width: 400px;">
                    <tr>
                        <th>#</th>
                        <th>Draft</th>
                        <th>Status</th>
                        <th>Change</th>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>$500.00</td>
                        <td><span class="status-badge status-cleared">Cleared</span></td>
                        <td style="color: var(--gray-400);">No change</td>
                    </tr>
                    <tr style="background: #fffaf0;">
                        <td style="color: #e53e3e; font-weight: 600;">2*</td>
                        <td>$600.00</td>
                        <td><span class="status-badge status-scheduled">Scheduled</span></td>
                        <td style="color: #e53e3e;">Modified</td>
                    </tr>
                    <tr style="background: #e6fffa;">
                        <td style="color: #e53e3e; font-weight: 600;">3*</td>
                        <td>$500.00</td>
                        <td><span class="status-badge status-scheduled">Scheduled</span></td>
                        <td style="color: #38b2ac;">New row</td>
                    </tr>
                </table>
            </div>

            <h3>Row Colors in Edit Mode</h3>
            <table class="comparison-table">
                <tr>
                    <th>Row Color</th>
                    <th>Meaning</th>
                </tr>
                <tr>
                    <td style="background: #fffaf0;">Orange/Yellow tint</td>
                    <td>Row has been modified in this editing session</td>
                </tr>
                <tr>
                    <td style="background: #e6fffa;">Teal/Cyan tint</td>
                    <td>Newly added row (not yet saved)</td>
                </tr>
                <tr>
                    <td style="background: #fed7d7; opacity: 0.7;">Red tint, faded</td>
                    <td>Row marked for deletion</td>
                </tr>
            </table>
        </section>

        <!-- Section 17: Maximize -->
        <section class="section" id="maximize">
            <h2><span class="section-number">17</span> Maximize/Minimize</h2>

            <p>Click the maximize button (&#9634;) in the header to expand the editor to full screen. Click again to return to normal size.</p>

            <h3>Maximized View Benefits</h3>
            <ul style="margin: 16px 0 16px 24px; color: var(--gray-600);">
                <li>See more rows without scrolling</li>
                <li>Better for editing many items</li>
                <li>Full width for all columns</li>
                <li>Ideal for presentations or screen sharing</li>
            </ul>

            <div class="info-box tip">
                <span class="info-icon">&#128187;</span>
                <div class="info-content">
                    <strong>Keyboard Tip</strong>
                    While there's no keyboard shortcut for maximize, you can use browser's F11 for full-screen browser mode combined with the maximize button for maximum viewing area.
                </div>
            </div>
        </section>

        <!-- Section 18: Refresh -->
        <section class="section" id="refresh">
            <h2><span class="section-number">18</span> Refresh Data</h2>

            <p>Click the refresh button (&#8635;) in the header to reload all payment plan data from the server.</p>

            <h3>When to Refresh</h3>
            <ul style="margin: 16px 0 16px 24px; color: var(--gray-600);">
                <li>After another user makes changes to the same plan</li>
                <li>After backend processes update payment statuses</li>
                <li>When you want to ensure you're seeing the latest data</li>
                <li>If you see stale or outdated information</li>
            </ul>

            <h3>What Gets Refreshed</h3>
            <ul style="margin: 16px 0 16px 24px; color: var(--gray-600);">
                <li>All payment plan versions</li>
                <li>Schedule items for the selected version</li>
                <li>Wire payments data</li>
                <li>Version status indicators</li>
            </ul>

            <div class="info-box note">
                <span class="info-icon">&#128257;</span>
                <div class="info-content">
                    <strong>Loading Indicator</strong>
                    A spinner overlay appears during refresh. The currently selected version remains selected after refresh completes. A success toast confirms when refresh is complete.
                </div>
            </div>
        </section>

        <!-- Section 19: Keyboard Shortcuts -->
        <section class="section" id="keyboard-shortcuts">
            <h2><span class="section-number">19</span> Keyboard Shortcuts</h2>

            <p>The Payment Plan Editor supports keyboard shortcuts for efficient data entry.</p>

            <h3>Available Shortcuts</h3>
            <table class="comparison-table">
                <tr>
                    <th>Shortcut</th>
                    <th>Action</th>
                    <th>Context</th>
                </tr>
                <tr>
                    <td><kbd class="kbd">Tab</kbd></td>
                    <td>Move to next input field</td>
                    <td>Edit mode</td>
                </tr>
                <tr>
                    <td><kbd class="kbd">Enter</kbd></td>
                    <td>Confirm selection (dropdowns)</td>
                    <td>Edit mode</td>
                </tr>
            </table>

            <!-- Fill Down (Ctrl+D) Example section removed - checkbox functionality was removed -->
        </section>

        <!-- Section 20: Common Workflows -->
        <section class="section" id="workflows">
            <h2><span class="section-number">20</span> Common Workflows</h2>

            <p>Here are step-by-step guides for common tasks you'll perform with the Payment Plan Editor.</p>

            <h3>Workflow 1: Modify a Payment Amount</h3>
            <div class="steps">
                <div class="step">
                    <div class="step-content">
                        <h4>Click "Manual" Button</h4>
                        <p>Enter edit mode to make changes.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-content">
                        <h4>Find the Row</h4>
                        <p>Locate the Scheduled payment you want to modify.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-content">
                        <h4>Click the Draft Amount Cell</h4>
                        <p>Type the new amount. Watch the Savings column update live.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-content">
                        <h4>Save as New Version</h4>
                        <p>Click "Save as New Version" to create a draft with your changes.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-content">
                        <h4>Activate</h4>
                        <p>Click "Activate" to make the new version active.</p>
                    </div>
                </div>
            </div>

            <h3>Workflow 2: Extend a Payment Plan</h3>
            <div class="steps">
                <div class="step">
                    <div class="step-content">
                        <h4>Update Opportunity</h4>
                        <p>On the parent Opportunity record, increase Number_of_Weeks__c to the desired total.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-content">
                        <h4>Click "Recalculate"</h4>
                        <p>This creates a new draft with additional Scheduled items.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-content">
                        <h4>Review the New Schedule</h4>
                        <p>Verify the dates and amounts are correct. Modify if needed using Manual mode.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-content">
                        <h4>Activate</h4>
                        <p>Click "Activate" to make the extended plan active.</p>
                    </div>
                </div>
            </div>

            <h3>Workflow 3: Add Multiple Payments with Same Amount</h3>
            <div class="steps">
                <div class="step">
                    <div class="step-content">
                        <h4>Enter Edit Mode</h4>
                        <p>Click "Manual" to start editing.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-content">
                        <h4>Add New Rows</h4>
                        <p>Click "+ Add Draft Payment" to add the number of rows you need.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-content">
                        <h4>Set Value in First Row</h4>
                        <p>Enter the desired value in the first row (e.g., $500.00).</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-content">
                        <h4>Click the Cell to Select It</h4>
                        <p>Click the cell to highlight it with a blue border. A fill handle appears at the bottom-right corner.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-content">
                        <h4>Drag Fill Handle Down</h4>
                        <p>Drag the fill handle down to copy the value to all target rows.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-content">
                        <h4>Save and Activate</h4>
                        <p>Save as new version and activate.</p>
                    </div>
                </div>
            </div>

            <h3>Workflow 4: Pause All Future Payments</h3>
            <div class="steps">
                <div class="step">
                    <div class="step-content">
                        <h4>Click "Suspend"</h4>
                        <p>This creates a new draft where all Scheduled items become Cancelled.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-content">
                        <h4>Review the Changes</h4>
                        <p>Verify that only Scheduled items were cancelled. Cleared/NSF items remain unchanged.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-content">
                        <h4>Activate</h4>
                        <p>Click "Activate" to make the suspended plan active. No more payments will process.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p>Payment Plan Editor User Guide v2.0 | Last Updated: January 2026</p>
            <p>For questions or support, please contact your Salesforce administrator.</p>
        </footer>
    </div>
</body>
</html>
